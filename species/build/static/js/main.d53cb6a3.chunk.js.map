{"version":3,"sources":["context/LocProvider.jsx","context/RouteProvider.jsx","utils/checkCache.js","utils/getTopLocs.js","components/LocItem.jsx","components/LocCont.jsx","components/Sidebar.jsx","components/SpeciesItem.jsx","utils/getSpeciesOfLoc.js","utils/getSpeciesData.js","components/SpeciesCont.jsx","components/MainCont.jsx","components/Explore.jsx","App.jsx","index.js"],"names":["LocContext","React","createContext","LocProvider","props","useState","loc","setLoc","locSpec","setLocSpec","locData","setLocData","Provider","value","locInfo","onLocChange","newLoc","console","log","onLocSpecChange","newLocSpec","onLocDataChange","newData","children","RouteContext","RouteProvider","match","useRouteMatch","gen","require","data","func","a","opts","seed","JSON","stringify","idNum","create","cached","parse","localStorage","getItem","Object","keys","length","resp","setItem","checkCache","getTopLocs","axios","get","then","response","dataResp","catch","error","LocItem","selected","push","className","to","lugar","count","LocCont","locsData","setLocsData","useContext","locSelected","useEffect","locsItemList","i","Sidebar","SpeciesItem","species","imgUrl","values","info","registers","registry","hoverable","cover","alt","src","title","scientific_name","description","nombre_comun","getSpeciesOfLoc","query","getSpeciesData","post","dataJson","getSubArr","srcArr","page","slice","SpeciesCont","path","params","paramPage","loading","setLoading","setPage","speciesData","setSpeciesData","speciesItemList","setSpeciesItemList","allSpecies","setAllSpecies","speciesArr","setSpeciesArr","tempAllSpecies","elem","indexOf","specLocs","lugaresDetallados","specLoc","sp","dataElemArr","dataElem","history","useHistory","antIcon","LoadingOutlined","style","fontSize","spin","indicator","display","flexWrap","justifyContent","onChange","ev","exp","newUrl","url","replace","onPageChange","showTotal","defaultCurrent","showSizeChanger","total","defaultPageSize","position","MainCont","exact","Explore","textAlign","color","paddingTop","Header","Layout","Footer","Sider","Content","App","breakpoint","collapsedWidth","zeroWidthTriggerStyle","top","justifySelf","width","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d53cb6a3.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\n\r\nconst LocContext = React.createContext({})\r\n\r\nexport const LocProvider = (props) => {\r\n  const [loc, setLoc] = useState(\"\")\r\n  const [locSpec, setLocSpec] = useState(\"\")\r\n  const [locData, setLocData] = useState([])\r\n  \r\n  const handleLocDataChange = (newData) => {\r\n    console.log(\"setLocData\",newData)\r\n    setLocData(newData)\r\n  }\r\n\r\n  const handleLocChange = (newLoc) => {\r\n    console.log(\"setLoc\",newLoc)\r\n    setLoc(newLoc)\r\n  }\r\n  \r\n  const handleLocSpecChange = (newLocSpec) => {\r\n    console.log(\"setLocSpec\",newLocSpec)\r\n    setLocSpec(newLocSpec)\r\n  }\r\n\r\n  return(\r\n    <LocContext.Provider value={{\r\n      locInfo: {\r\n        loc: loc,\r\n        locSpec: locSpec,\r\n        locData: locData,\r\n        onLocChange: handleLocChange,\r\n        onLocSpecChange: handleLocSpecChange,\r\n        onLocDataChange: handleLocDataChange\r\n      }\r\n    }}>\r\n      {props.children}\r\n    </LocContext.Provider>\r\n  )\r\n}\r\n\r\nexport default LocContext","import React from \"react\";\r\nimport { useRouteMatch } from \"react-router\";\r\n\r\nconst RouteContext = React.createContext({})\r\n\r\nexport const RouteProvider = (props) => {\r\n  const match = useRouteMatch()\r\n  return(\r\n    <RouteContext.Provider value={{match: match}}>\r\n      {props.children}\r\n    </RouteContext.Provider>\r\n  )\r\n}\r\n\r\nexport default RouteContext\r\n","var gen = require('random-seed')\r\n\r\nasync function checkCache(data, func, opts = []) {\r\n  const seed = JSON.stringify(data)\r\n  const idNum = gen.create(seed)(999999)\r\n  console.log(data, idNum)\r\n  const cached = JSON.parse(localStorage.getItem(idNum))\r\n  if(cached && typeof cached === \"object\" &&  Object.keys(cached).length !== 0){\r\n    console.log(\"FROM CACHE\")\r\n    return cached\r\n  } else {\r\n    const resp = await func(data, ...opts)\r\n    console.log(\"FROM REQUEST\")\r\n    if(resp){\r\n      localStorage.setItem(idNum,JSON.stringify(resp))\r\n    }\r\n    return resp\r\n  }\r\n}\r\n\r\nexport default checkCache;","import axios from 'axios';\r\n\r\n//const testData = \"[{\\\"lugar\\\":\\\"TEST - Concordia\\\",\\\"count\\\":460},{\\\"lugar\\\":\\\"TEST - Paraná\\\",\\\"count\\\":436},{\\\"lugar\\\":\\\"TEST - Chajarí\\\",\\\"count\\\":344},{\\\"lugar\\\":\\\"Gualeguaychú\\\",\\\"count\\\":317},{\\\"lugar\\\":\\\"Ceibas\\\",\\\"count\\\":297}]\"\r\n\r\nconst getTopLocs = async () => {\r\n  var data\r\n  await axios\r\n    .get(\"https://us-central1-species-eebec.cloudfunctions.net/app\")\r\n    .then((response) => {\r\n      console.log(\"getTopLocs\")\r\n      const dataResp = response.data\r\n      data = JSON.parse(dataResp)\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"ERROR!!! : \", error)\r\n      //dataSet(JSON.parse(testData))\r\n    })\r\n  return data\r\n}\r\n\r\nexport default getTopLocs","import React from 'react';\r\nimport { Link} from 'react-router-dom';\r\nimport './LocItem.scss'\r\n\r\nfunction LocItem(props) {\r\n  var locsSpec = []\r\n  if(props.selected){\r\n    locsSpec.push()\r\n  }\r\n  return (\r\n    <div className=\"locItem\">\r\n      <Link to={`/explore/${props.loc.lugar}/1`}>\r\n        <span className=\"loc\">{props.loc.lugar}</span>\r\n        {\" \"} \r\n        <span className=\"count\">{props.loc.count}</span>\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LocItem;","import React, { useContext, useEffect, useState } from 'react';\r\nimport LocContext from '../context/LocProvider';\r\nimport checkCache from '../utils/checkCache';\r\nimport getTopLocs from '../utils/getTopLocs';\r\nimport LocItem from './LocItem';\r\n\r\nfunction LocCont(props) {\r\n  \r\n  const [locsData, setLocsData] = useState(null)\r\n\r\n  const locInfo = useContext(LocContext).locInfo\r\n  const locSelected = locInfo.loc\r\n  const onLocDataChange = locInfo.onLocDataChange\r\n\r\n  useEffect(() => {\r\n    (async ()=>{\r\n      const response = await checkCache(\"getTopLocs\",getTopLocs)\r\n      onLocDataChange(response)\r\n      console.log(\"setLocsData: \", response)\r\n      setLocsData(response)\r\n    })()\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [])\r\n\r\n  //const locSpecSelected = locInfo.locSpec\r\n\r\n  const locsItemList = []\r\n  if(locsData){\r\n    let i = 0\r\n    for(const loc of locsData){\r\n      locsItemList.push(\r\n        <LocItem loc={loc} selected={(loc === locSelected)} key={loc+'-'+i}/>\r\n      )\r\n      i++\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"locCont\">\r\n      {locsItemList}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LocCont;","import React from 'react';\r\n//import LocContext from '../context/LocProvider';\r\nimport LocCont from './LocCont';\r\nimport './Sidebar.scss'\r\n\r\nfunction Sidebar(props) {\r\n\r\n  return (\r\n    <div className=\"Sidebar\">\r\n      <LocCont/>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Sidebar;","import './SpeciesItem.scss'\r\nimport React from 'react';\r\nimport { Card } from 'antd';\r\nimport Meta from 'antd/lib/card/Meta';\r\n\r\nfunction SpeciesItem(props) {\r\n  const species = props.species\r\n  //console.log(\"NEW SpeciesItem: \",species.scientific_name)\r\n  let imgUrl = \"\"\r\n  for(let registry of Object.values(species.info.registers)){\r\n    if(imgUrl){break}\r\n    if(registry.imgUrl && registry.imgUrl!==\"https://www.ecoregistros.org/site/images/play.bmp\"){\r\n      imgUrl = registry.imgUrl\r\n    }\r\n  }\r\n  if(!imgUrl){\r\n    imgUrl = \"https://www.emsevilla.es/wp-content/uploads/2020/10/no-image-1.png\"\r\n  }\r\n  return (\r\n    <>\r\n      <Card\r\n        hoverable\r\n        className=\"Card\"\r\n        cover={<div className=\"imgSpCont\"><img className=\"imgSp\" alt=\"example\" src={imgUrl}/></div>}\r\n      >\r\n        <Meta title={species.scientific_name} description={species.nombre_comun} />\r\n      </Card>\r\n      {/*\r\n      <div className=\"registryCont\">\r\n        <div className=\"registryData\">\r\n          <h3>{species.scientific_name}</h3>\r\n          {species.nombre_comun ? <h4>{species.nombre_comun}</h4> : null}\r\n          {species.info.nombre_ingles ? <p>Inglés: {species.info.nombre_ingles}</p> : null}\r\n          {species.info.nombre_port ? <p>Portugués: {species.info.nombre_port}</p> : null}\r\n        </div>\r\n        <div className=\"imgSpCont\">\r\n          {imgUrl ? <img className=\"imgSp\" src={imgUrl} alt=\"species sample\"></img> : null}\r\n        </div>\r\n      </div>\r\n      */}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SpeciesItem;","import axios from \"axios\"\r\n\r\n\r\nconst getSpeciesOfLoc = async (query) => {\r\n  console.log(query)\r\n  var data\r\n  await axios\r\n    .get(query)\r\n    .then((response) => {\r\n      console.log(\"getSpecies\")\r\n      const dataResp = response.data\r\n      data = JSON.parse(dataResp)\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"ERROR!!! : \", error)\r\n      //speciesDataSet(JSON.parse(testData))\r\n    })\r\n  return data\r\n}\r\n\r\nexport default getSpeciesOfLoc","import axios from 'axios';\r\n\r\nconst testData = [\"Nothura maculosa\",\"Podiceps major\"]\r\n\r\nconst getSpeciesData = async (data) => {\r\n  var dataJson\r\n  await axios.post(\"https://us-central1-species-eebec.cloudfunctions.net/app\", {\"species\": data})\r\n    .then((response) => {\r\n      console.log(\"getSpeciesData\")\r\n      const dataResp = response.data\r\n      dataJson = JSON.parse(dataResp)\r\n      console.log(\"datas sent: \",data,\"dataJson: \", dataJson)\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"getSpeciesData ERROR!!! : \", error)\r\n      //dataSet(JSON.parse(testData))\r\n    })\r\n  return dataJson\r\n}\r\n\r\nexport default getSpeciesData","import React, { useContext, useEffect, useRef, useState } from 'react';\r\nimport SpeciesItem from './SpeciesItem';\r\nimport './SpeciesCont.scss'\r\nimport RouteContext from '../context/RouteProvider';\r\nimport LocContext from '../context/LocProvider';\r\nimport getSpeciesOfLoc from '../utils/getSpeciesOfLoc';\r\nimport checkCache from '../utils/checkCache';\r\nimport getSpeciesData from '../utils/getSpeciesData'\r\nimport 'antd/dist/antd.css';\r\nimport { Pagination, Spin } from 'antd';\r\nimport { useHistory } from 'react-router';\r\nimport { LoadingOutlined } from '@ant-design/icons';\r\n\r\nconst spByPage = 20\r\n\r\nfunction getSubArr(srcArr, page){\r\n  console.log(\"getSubArr: \",page)\r\n  const newArr = srcArr.slice((page-1)*spByPage, (page)*spByPage)\r\n  return newArr\r\n}\r\n\r\nfunction SpeciesCont(props) {\r\n  console.log(\"render SpeciesCont\")\r\n  let query = \"https://us-central1-species-eebec.cloudfunctions.net/app\"\r\n\r\n  const match = useContext(RouteContext).match\r\n  console.log(\"SpeciesCont match path: \",match.path)\r\n  const loc = match.params.lugar\r\n  const paramPage = match.params.page\r\n  const onLocChange = useContext(LocContext).locInfo.onLocChange\r\n  \r\n  const [loading, setLoading] = useState(false)\r\n  const [page, setPage] = useState(1)\r\n  const [speciesData, setSpeciesData] = useState([])\r\n  const [speciesItemList, setSpeciesItemList] = useState([])\r\n  const [allSpecies, setAllSpecies] = useState([])\r\n  const [speciesArr, setSpeciesArr] = useState([])\r\n\r\n  console.log(\"page: \",page)\r\n  useEffect(()=>{                                                     // Sets page index based on url path params. Default is 1.\r\n    if(paramPage){\r\n      console.log(\"setPage: \",paramPage)\r\n      setPage(paramPage)\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  },[paramPage])\r\n\r\n  /*\r\n    const firstUpdate = useRef(true);\r\n    useEffect(()=>{                                                   // CURRENTLY UNNECESSARY (currently using the url path params)\r\n      if (firstUpdate.current) {\r\n        firstUpdate.current = false;\r\n        return;\r\n      }\r\n      if(loc){\r\n        console.log(\"(locChange) setPage: \",1)\r\n        onLocChange(loc)\r\n        setPage(1)\r\n      }\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    },[loc])\r\n  */\r\n\r\n  if(loc){\r\n    query += `?lugar=${loc}`\r\n  } else {\r\n    query += `?lugar=Chajarí`\r\n    console.log(\"ERROR - SpeciesCont: No loc name\")\r\n  }\r\n  console.log(query)\r\n\r\n  useEffect(() => {                                                   // Looks up if the species data for this location has already been\r\n    (async ()=>{                                                      // requested and cached, in which case it returns the cached data.\r\n      console.log(query)                                              // Otherwise it requests, caches and returns the data.\r\n      setLoading(true)\r\n      const resp = await checkCache(query,getSpeciesOfLoc)\r\n      if(resp){\r\n        console.log(\"setSpeciesData: \",resp)\r\n        setSpeciesData({...resp})\r\n      } else {\r\n        console.log(\"RESP EMPTY: \", resp)\r\n      }\r\n    })()\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [query])\r\n\r\n  useEffect(()=>{                                                     // Loops through the species data and returns all species\r\n    console.log(\"setSpeciesData INSIDE setAllSpecies useEffect: \",speciesData)\r\n    if(speciesData && speciesData.count){\r\n      const tempAllSpecies = []\r\n      for(let elem of speciesData.species){\r\n        if(elem && allSpecies.indexOf(elem) === -1){\r\n          tempAllSpecies.push(elem)\r\n        }\r\n      }\r\n      const specLocs = speciesData.lugaresDetallados\r\n      for(let specLoc in specLocs){\r\n        console.log(specLoc)\r\n        for(let sp of specLocs[specLoc].species){\r\n          if(sp && allSpecies.indexOf(sp) === -1){\r\n            tempAllSpecies.push(sp)\r\n          }\r\n        }\r\n      }\r\n      setAllSpecies(tempAllSpecies)\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  },[speciesData])\r\n\r\n  useEffect(() => {                                                   // Gets subArray of allSpecies array based on page index\r\n    console.log(\"setSpeciesArr: \",getSubArr(allSpecies, page))\r\n    setSpeciesArr([...getSubArr(allSpecies, page)])\r\n  },[allSpecies, page])\r\n\r\n  useEffect(() => {                                                   // Creates a SpeciesItem component for each species\r\n    let dataElemArr = [];\r\n    (async ()=>{\r\n      \r\n      console.log(\"speciesArr\",speciesArr)\r\n      if(speciesArr.length){\r\n        const data = await checkCache(speciesArr, getSpeciesData)     // Looks up if the data for this species (singular) has already been\r\n        //console.log(data)                                           // requested and cached, in which case it returns the cached data.\r\n        if(data){                                                     // Otherwise it requests, caches and returns the data.\r\n          for(let dataElem of data){\r\n            if(dataElem){\r\n              dataElemArr.push(\r\n                <SpeciesItem species={dataElem} key={dataElem.scientific_name}/>\r\n              )\r\n            }\r\n          }\r\n        }\r\n      }\r\n      console.log(\"setSpeciesItemList: \",dataElemArr)\r\n      setSpeciesItemList([...dataElemArr])\r\n      setLoading(false)\r\n    })()\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [speciesArr])\r\n\r\n  const history = useHistory();\r\n\r\n  const onPageChange = (ev) => {                                      // Changes page index (pushes to history)\r\n    console.log(\"Push Page: \",ev)\r\n    let exp = /\\/[0-9]+/i\r\n    let newUrl = match.url\r\n    if(newUrl.match(exp)){\r\n      newUrl = newUrl.replace(exp, \"\")\r\n    }\r\n    history.push(`${newUrl}/${ev}`)\r\n  }\r\n  console.log(speciesItemList)\r\n\r\n  const antIcon = <LoadingOutlined style={{ fontSize: 80 }} spin />;\r\n\r\n  return (\r\n    <>\r\n      {loading && \r\n        <div className=\"spinCont\">\r\n          <h2>LOADING...</h2>\r\n          <Spin indicator={antIcon}/>\r\n        </div>\r\n      }\r\n      <div>\r\n        <div style={{display: \"flex\", flexWrap: \"wrap\", justifyContent: \"space-evenly\"}}>\r\n          {[...speciesItemList]}\r\n        </div>\r\n        <div className=\"pagCont\">\r\n          <Pagination\r\n            onChange={ev => onPageChange(ev)} \r\n            showTotal={()=>`${(page-1)*spByPage}-${(page)*spByPage} de ${allSpecies.length} especies`} \r\n            defaultCurrent={page} \r\n            showSizeChanger={false}\r\n            total={allSpecies.length} \r\n            defaultPageSize={20} \r\n            style={{display: \"flex\", justifyContent: \"center\", position: \"relative\"}}\r\n          />\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default SpeciesCont;","import { Switch } from 'antd';\r\nimport React, { useContext } from 'react';\r\nimport { Route, useRouteMatch } from 'react-router';\r\nimport RouteContext, { RouteProvider } from '../context/RouteProvider';\r\nimport SpeciesCont from './SpeciesCont';\r\n\r\nfunction MainCont(props) {\r\n  const match = useContext(RouteContext).match\r\n  console.log(\"match: \",match.path)\r\n\r\n  return (\r\n    <>\r\n      <Route path={`${match.path}/:page`}>\r\n        <RouteProvider>\r\n          <SpeciesCont/>\r\n        </RouteProvider>\r\n      </Route>\r\n      <Route path={`${match.path}`} exact>\r\n        <RouteProvider>\r\n          <SpeciesCont/>\r\n        </RouteProvider>\r\n      </Route>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default MainCont;","import React, { useContext } from 'react';\r\nimport { Route, Switch } from 'react-router';\r\nimport RouteContext, {RouteProvider} from '../context/RouteProvider';\r\nimport MainCont from './MainCont';\r\n\r\nfunction Explore(props) {\r\n\r\n  const match = useContext(RouteContext).match\r\n  console.log(\"match: \",match.path)\r\n\r\n  return (\r\n    <div>\r\n      <Switch>\r\n        <Route path={`${match.path}/:lugar`}>\r\n          <RouteProvider>\r\n            <MainCont/>\r\n          </RouteProvider>\r\n        </Route>\r\n        <Route path={match.path}>\r\n          <h2 style={{position: \"relative\", textAlign: \"center\", color: \"white\", paddingTop: 20}}>Please select a location from the left menu</h2>\r\n        </Route>\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Explore;","import React from 'react';\nimport './App.scss'\nimport 'antd/dist/antd.css';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  //BrowserRouter,\n  HashRouter,\n  //Link,\n} from \"react-router-dom\";\nimport { LocProvider } from './context/LocProvider';\nimport { RouteProvider } from './context/RouteProvider';\nimport Sidebar from './components/Sidebar';\nimport Explore from './components/Explore';\nimport { Layout } from 'antd';\n\nconst { Header, Footer, Sider, Content } = Layout;\n\nfunction App() {\n  return (\n    <Router>\n      <HashRouter>\n        <div className=\"App\">\n          <LocProvider>\n          <Layout>\n            <Header>\n              {/*<Header/>*/}\n            </Header>\n            <Layout>\n              <Sider breakpoint=\"md\" collapsedWidth=\"0\" zeroWidthTriggerStyle={{top:0,justifySelf: \"end\"}} width={250} >\n                <Sidebar/>\n              </Sider>\n              <Content>\n                <div className=\"mainDiv\">\n                  <Switch>\n                    <Route path=\"/\" exact>\n                      <RouteProvider>\n                        {/*<Home />*/}\n                      </RouteProvider>\n                    </Route>\n                    <Route path=\"/explore\">\n                      <RouteProvider>\n                        <Explore />\n                      </RouteProvider>\n                    </Route>\n                  </Switch>\n                </div>\n              </Content>\n            </Layout>\n            <Footer>\n              \n            </Footer>\n          </Layout>\n            \n          </LocProvider>\n        </div>\n      </HashRouter>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n//import './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}