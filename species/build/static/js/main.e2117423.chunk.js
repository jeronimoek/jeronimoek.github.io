(this.webpackJsonpspecies=this.webpackJsonpspecies||[]).push([[0],{161:function(e,t,c){},189:function(e,t,c){},190:function(e,t,c){},323:function(e,t,c){},324:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(22),s=c.n(r),o=(c(161),c(112),c(68)),l=c(14),i=c(37),u=c(7),j=a.a.createContext({}),p=function(e){var t=Object(n.useState)(""),c=Object(i.a)(t,2),a=c[0],r=c[1],s=Object(n.useState)(""),o=Object(i.a)(s,2),l=o[0],p=o[1],b=Object(n.useState)([]),f=Object(i.a)(b,2),h=f[0],O=f[1];return Object(u.jsx)(j.Provider,{value:{locInfo:{loc:a,locSpec:l,locData:h,onLocChange:function(e){console.log("setLoc",e),r(e)},onLocSpecChange:function(e){console.log("setLocSpec",e),p(e)},onLocDataChange:function(e){console.log("setLocData",e),O(e)}}},children:e.children})},b=j,f=a.a.createContext({}),h=function(e){var t=Object(l.g)();return Object(u.jsx)(f.Provider,{value:{match:t},children:e.children})},O=f,d=c(63),g=c(21),x=c.n(g),v=c(30),m=c(70),S=c(170);function y(){return y=Object(v.a)(x.a.mark((function e(t,c){var n,a,r,s,o,l=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>2&&void 0!==l[2]?l[2]:[],a=JSON.stringify(t),r=S.create(a)(999999),console.log(t,r),!(s=JSON.parse(localStorage.getItem(r)))||"object"!==typeof s||0===Object.keys(s).length){e.next=10;break}return console.log("FROM CACHE"),e.abrupt("return",s);case 10:return e.next=12,c.apply(void 0,[t].concat(Object(m.a)(n)));case 12:return o=e.sent,console.log("FROM REQUEST"),o&&localStorage.setItem(r,JSON.stringify(o)),e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}var C=function(e,t){return y.apply(this,arguments)},w=c(56),E=c.n(w),N=function(){var e=Object(v.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("https://us-central1-species-eebec.cloudfunctions.net/app").then((function(e){console.log("getTopLocs");var c=e.data;t=JSON.parse(c)})).catch((function(e){console.log("ERROR!!! : ",e)}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=N;var k=function(e){return e.selected&&[].push(),Object(u.jsxs)("div",{children:[Object(u.jsx)(o.c,{to:"/explore/".concat(e.loc.lugar,"/1"),children:e.loc.lugar})," - ",e.loc.count]})};var D=function(e){var t=Object(n.useState)(null),c=Object(i.a)(t,2),a=c[0],r=c[1],s=Object(n.useContext)(b).locInfo,o=s.loc,l=s.onLocDataChange;Object(n.useEffect)((function(){Object(v.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C("getTopLocs",R);case 2:t=e.sent,l(t),console.log("setLocsData: ",t),r(t);case 6:case"end":return e.stop()}}),e)})))()}),[]);var j=[];if(a){var p,f=0,h=Object(d.a)(a);try{for(h.s();!(p=h.n()).done;){var O=p.value;j.push(Object(u.jsx)(k,{loc:O,selected:O===o},O+"-"+f)),f++}}catch(g){h.e(g)}finally{h.f()}}return Object(u.jsx)("div",{className:"locCont",children:j})};c(189);var L=function(e){return Object(u.jsx)("div",{className:"Sidebar",children:Object(u.jsx)(D,{})})},I=c(155),J=(c(190),c(327)),P=c(150),A=c.n(P);var T=function(e){for(var t=e.species,c="",n=0,a=Object.values(t.info.registers);n<a.length;n++){var r=a[n];if(c)break;r.imgUrl&&"https://www.ecoregistros.org/site/images/play.bmp"!==r.imgUrl&&(c=r.imgUrl)}return c||(c="https://www.emsevilla.es/wp-content/uploads/2020/10/no-image-1.png"),Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(J.a,{hoverable:!0,className:"Card",cover:Object(u.jsx)("div",{className:"imgSpCont",children:Object(u.jsx)("img",{className:"imgSp",alt:"example",src:c})}),children:Object(u.jsx)(A.a,{title:t.scientific_name,description:t.nombre_comun})})})},F=(c(323),function(){var e=Object(v.a)(x.a.mark((function e(t){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,E.a.get(t).then((function(e){console.log("getSpecies");var t=e.data;c=JSON.parse(t)})).catch((function(e){console.log("ERROR!!! : ",e)}));case 3:return e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),M=F,U=function(){var e=Object(v.a)(x.a.mark((function e(t){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("https://us-central1-species-eebec.cloudfunctions.net/app",{species:t}).then((function(e){console.log("getSpeciesData");var n=e.data;c=JSON.parse(n),console.log("datas sent: ",t,"dataJson: ",c)})).catch((function(e){console.log("getSpeciesData ERROR!!! : ",e)}));case 2:return e.abrupt("return",c);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=U,W=c(328);function _(e,t){return console.log("getSubArr: ",t),e.slice(20*(t-1),20*t)}var H=function(e){console.log("render SpeciesCont");var t="https://us-central1-species-eebec.cloudfunctions.net/app",c=Object(n.useContext)(O).match;console.log("SpeciesCont match path: ",c.path);var a=c.params.lugar,r=c.params.page,s=(Object(n.useContext)(b).locInfo.onLocChange,Object(n.useState)(1)),o=Object(i.a)(s,2),j=o[0],p=o[1],f=Object(n.useState)([]),h=Object(i.a)(f,2),g=h[0],S=h[1],y=Object(n.useState)([]),w=Object(i.a)(y,2),E=w[0],N=w[1],R=Object(n.useState)([]),k=Object(i.a)(R,2),D=k[0],L=k[1],J=Object(n.useState)([]),P=Object(i.a)(J,2),A=P[0],F=P[1];console.log("page: ",j),Object(n.useEffect)((function(){r&&(console.log("setPage: ",r),p(r))}),[r]),a?t+="?lugar=".concat(a):(t+="?lugar=Chajar\xed",console.log("ERROR - SpeciesCont: No loc name")),console.log(t),Object(n.useEffect)((function(){Object(v.a)(x.a.mark((function e(){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,C(t,M);case 3:(c=e.sent)?(console.log("setSpeciesData: ",c),S(Object(I.a)({},c))):console.log("RESP EMPTY: ",c);case 5:case"end":return e.stop()}}),e)})))()}),[t]),Object(n.useEffect)((function(){if(console.log("setSpeciesData INSIDE setAllSpecies useEffect: ",g),g&&g.count){var e,t=[],c=Object(d.a)(g.species);try{for(c.s();!(e=c.n()).done;){var n=e.value;n&&-1===D.indexOf(n)&&t.push(n)}}catch(i){c.e(i)}finally{c.f()}var a=g.lugaresDetallados;for(var r in a){console.log(r);var s,o=Object(d.a)(a[r].species);try{for(o.s();!(s=o.n()).done;){var l=s.value;l&&-1===D.indexOf(l)&&t.push(l)}}catch(i){o.e(i)}finally{o.f()}}L(t)}}),[g]),Object(n.useEffect)((function(){console.log("setSpeciesArr: ",_(D,j)),F(Object(m.a)(_(D,j)))}),[D,j]),Object(n.useEffect)((function(){var e=[];Object(v.a)(x.a.mark((function t(){var c,n,a,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("speciesArr",A),!A.length){t.next=6;break}return t.next=4,C(A,z);case 4:if(c=t.sent){n=Object(d.a)(c);try{for(n.s();!(a=n.n()).done;)(r=a.value)&&e.push(Object(u.jsx)(T,{species:r},r.scientific_name))}catch(s){n.e(s)}finally{n.f()}}case 6:console.log("setSpeciesItemList: ",e),N([].concat(e));case 8:case"end":return t.stop()}}),t)})))()}),[A]);var U=Object(l.f)();return console.log(E),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-evenly"},children:Object(m.a)(E)}),Object(u.jsx)("div",{className:"pagCont",children:Object(u.jsx)(W.a,{onChange:function(e){return function(e){console.log("Push Page: ",e);var t=/\/[0-9]+/i,n=c.url;n.match(t)&&(n=n.replace(t,"")),U.push("".concat(n,"/").concat(e))}(e)},showTotal:function(){return"".concat(20*(j-1),"-").concat(20*j," de ").concat(D.length," especies")},defaultCurrent:j,showSizeChanger:!1,total:D.length,defaultPageSize:20,style:{display:"flex",justifyContent:"center",position:"relative"}})})]})};var B=function(e){var t=Object(n.useContext)(O).match;return console.log("match: ",t.path),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(l.a,{path:"".concat(t.path,"/:page"),children:Object(u.jsx)(h,{children:Object(u.jsx)(H,{})})}),Object(u.jsx)(l.a,{path:"".concat(t.path),exact:!0,children:Object(u.jsx)(h,{children:Object(u.jsx)(H,{})})})]})};var Q=function(e){var t=Object(n.useContext)(O).match;return console.log("match: ",t.path),Object(u.jsx)("div",{children:Object(u.jsxs)(l.c,{children:[Object(u.jsx)(l.a,{path:"".concat(t.path,"/:lugar"),children:Object(u.jsx)(h,{children:Object(u.jsx)(B,{})})}),Object(u.jsx)(l.a,{path:t.path,children:Object(u.jsx)("h3",{children:"Please select a location."})})]})})},Y=c(329),q=Y.a.Header,G=Y.a.Footer,K=Y.a.Sider,V=Y.a.Content;var X=function(){return Object(u.jsx)(o.a,{children:Object(u.jsx)(o.b,{children:Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(p,{children:Object(u.jsxs)(Y.a,{children:[Object(u.jsx)(q,{}),Object(u.jsxs)(Y.a,{children:[Object(u.jsx)(K,{breakpoint:"md",collapsedWidth:"0",zeroWidthTriggerStyle:{top:0,justifySelf:"end"},width:350,children:Object(u.jsx)(L,{})}),Object(u.jsx)(V,{children:Object(u.jsx)("div",{className:"mainDiv",children:Object(u.jsxs)(l.c,{children:[Object(u.jsx)(l.a,{path:"/",exact:!0,children:Object(u.jsx)(h,{})}),Object(u.jsx)(l.a,{path:"/explore",children:Object(u.jsx)(h,{children:Object(u.jsx)(Q,{})})})]})})})]}),Object(u.jsx)(G,{})]})})})})})};s.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(X,{})}),document.getElementById("root"))}},[[324,1,2]]]);
//# sourceMappingURL=main.e2117423.chunk.js.map