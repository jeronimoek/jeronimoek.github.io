{"version":3,"sources":["context/LocProvider.jsx","context/RouteProvider.jsx","utils/checkCache.js","utils/getTopLocs.js","components/LocItem.jsx","components/LocCont.jsx","components/Sidebar.jsx","components/SpeciesItem.jsx","utils/getSpeciesOfLoc.js","utils/getSpeciesData.js","components/SpeciesCont.jsx","components/MainCont.jsx","components/Explore.jsx","App.jsx","index.js"],"names":["LocContext","React","createContext","LocProvider","props","useState","loc","setLoc","locSpec","setLocSpec","locData","setLocData","Provider","value","locInfo","onLocChange","newLoc","console","log","onLocSpecChange","newLocSpec","onLocDataChange","newData","children","RouteContext","RouteProvider","match","useRouteMatch","gen","require","data","func","a","opts","seed","JSON","stringify","idNum","create","cached","parse","localStorage","getItem","Object","keys","length","resp","setItem","checkCache","getTopLocs","axios","get","then","response","dataResp","catch","error","LocItem","selected","push","to","lugar","count","LocCont","locsData","setLocsData","useContext","locSelected","useEffect","locsItemList","i","className","Sidebar","SpeciesItem","species","imgUrl","values","info","registers","registry","hoverable","cover","alt","src","title","scientific_name","description","nombre_comun","getSpeciesOfLoc","query","getSpeciesData","post","dataJson","getSubArr","srcArr","page","slice","SpeciesCont","path","params","paramPage","setPage","speciesData","setSpeciesData","speciesItemList","setSpeciesItemList","allSpecies","setAllSpecies","speciesArr","setSpeciesArr","tempAllSpecies","elem","indexOf","specLocs","lugaresDetallados","specLoc","sp","dataElemArr","dataElem","history","useHistory","style","display","flexWrap","justifyContent","onChange","ev","exp","newUrl","url","replace","onPageChange","showTotal","defaultCurrent","showSizeChanger","total","defaultPageSize","position","MainCont","exact","Explore","Header","Layout","Footer","Sider","Content","App","breakpoint","collapsedWidth","zeroWidthTriggerStyle","top","justifySelf","width","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e2117423.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\n\r\nconst LocContext = React.createContext({})\r\n\r\nexport const LocProvider = (props) => {\r\n  const [loc, setLoc] = useState(\"\")\r\n  const [locSpec, setLocSpec] = useState(\"\")\r\n  const [locData, setLocData] = useState([])\r\n  \r\n  const handleLocDataChange = (newData) => {\r\n    console.log(\"setLocData\",newData)\r\n    setLocData(newData)\r\n  }\r\n\r\n  const handleLocChange = (newLoc) => {\r\n    console.log(\"setLoc\",newLoc)\r\n    setLoc(newLoc)\r\n  }\r\n  \r\n  const handleLocSpecChange = (newLocSpec) => {\r\n    console.log(\"setLocSpec\",newLocSpec)\r\n    setLocSpec(newLocSpec)\r\n  }\r\n\r\n  return(\r\n    <LocContext.Provider value={{\r\n      locInfo: {\r\n        loc: loc,\r\n        locSpec: locSpec,\r\n        locData: locData,\r\n        onLocChange: handleLocChange,\r\n        onLocSpecChange: handleLocSpecChange,\r\n        onLocDataChange: handleLocDataChange\r\n      }\r\n    }}>\r\n      {props.children}\r\n    </LocContext.Provider>\r\n  )\r\n}\r\n\r\nexport default LocContext","import React from \"react\";\r\nimport { useRouteMatch } from \"react-router\";\r\n\r\nconst RouteContext = React.createContext({})\r\n\r\nexport const RouteProvider = (props) => {\r\n  const match = useRouteMatch()\r\n  return(\r\n    <RouteContext.Provider value={{match: match}}>\r\n      {props.children}\r\n    </RouteContext.Provider>\r\n  )\r\n}\r\n\r\nexport default RouteContext\r\n","var gen = require('random-seed')\r\n\r\nasync function checkCache(data, func, opts = []) {\r\n  const seed = JSON.stringify(data)\r\n  const idNum = gen.create(seed)(999999)\r\n  console.log(data, idNum)\r\n  const cached = JSON.parse(localStorage.getItem(idNum))\r\n  if(cached && typeof cached === \"object\" &&  Object.keys(cached).length !== 0){\r\n    console.log(\"FROM CACHE\")\r\n    return cached\r\n  } else {\r\n    const resp = await func(data, ...opts)\r\n    console.log(\"FROM REQUEST\")\r\n    if(resp){\r\n      localStorage.setItem(idNum,JSON.stringify(resp))\r\n    }\r\n    return resp\r\n  }\r\n}\r\n\r\nexport default checkCache;","import axios from 'axios';\r\n\r\n//const testData = \"[{\\\"lugar\\\":\\\"TEST - Concordia\\\",\\\"count\\\":460},{\\\"lugar\\\":\\\"TEST - Paraná\\\",\\\"count\\\":436},{\\\"lugar\\\":\\\"TEST - Chajarí\\\",\\\"count\\\":344},{\\\"lugar\\\":\\\"Gualeguaychú\\\",\\\"count\\\":317},{\\\"lugar\\\":\\\"Ceibas\\\",\\\"count\\\":297}]\"\r\n\r\nconst getTopLocs = async () => {\r\n  var data\r\n  await axios\r\n    .get(\"https://us-central1-species-eebec.cloudfunctions.net/app\")\r\n    .then((response) => {\r\n      console.log(\"getTopLocs\")\r\n      const dataResp = response.data\r\n      data = JSON.parse(dataResp)\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"ERROR!!! : \", error)\r\n      //dataSet(JSON.parse(testData))\r\n    })\r\n  return data\r\n}\r\n\r\nexport default getTopLocs","import React from 'react';\r\nimport { Link} from 'react-router-dom';\r\n\r\nfunction LocItem(props) {\r\n  var locsSpec = []\r\n  if(props.selected){\r\n    locsSpec.push()\r\n  }\r\n  return (\r\n    <div>\r\n      <Link to={`/explore/${props.loc.lugar}/1`}>{props.loc.lugar}</Link> - {props.loc.count}\r\n      {}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LocItem;","import React, { useContext, useEffect, useState } from 'react';\r\nimport LocContext from '../context/LocProvider';\r\nimport checkCache from '../utils/checkCache';\r\nimport getTopLocs from '../utils/getTopLocs';\r\nimport LocItem from './LocItem';\r\n\r\nfunction LocCont(props) {\r\n  \r\n  const [locsData, setLocsData] = useState(null)\r\n\r\n  const locInfo = useContext(LocContext).locInfo\r\n  const locSelected = locInfo.loc\r\n  const onLocDataChange = locInfo.onLocDataChange\r\n\r\n  useEffect(() => {\r\n    (async ()=>{\r\n      const response = await checkCache(\"getTopLocs\",getTopLocs)\r\n      onLocDataChange(response)\r\n      console.log(\"setLocsData: \", response)\r\n      setLocsData(response)\r\n    })()\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [])\r\n\r\n  //const locSpecSelected = locInfo.locSpec\r\n\r\n  const locsItemList = []\r\n  if(locsData){\r\n    let i = 0\r\n    for(const loc of locsData){\r\n      locsItemList.push(\r\n        <LocItem loc={loc} selected={(loc === locSelected)} key={loc+'-'+i}/>\r\n      )\r\n      i++\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"locCont\">\r\n      {locsItemList}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LocCont;","import React from 'react';\r\n//import LocContext from '../context/LocProvider';\r\nimport LocCont from './LocCont';\r\nimport './Sidebar.scss'\r\n\r\nfunction Sidebar(props) {\r\n\r\n  return (\r\n    <div className=\"Sidebar\">\r\n      <LocCont/>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Sidebar;","import './SpeciesItem.scss'\r\nimport React from 'react';\r\nimport { Card } from 'antd';\r\nimport Meta from 'antd/lib/card/Meta';\r\n\r\nfunction SpeciesItem(props) {\r\n  const species = props.species\r\n  //console.log(\"NEW SpeciesItem: \",species.scientific_name)\r\n  let imgUrl = \"\"\r\n  for(let registry of Object.values(species.info.registers)){\r\n    if(imgUrl){break}\r\n    if(registry.imgUrl && registry.imgUrl!==\"https://www.ecoregistros.org/site/images/play.bmp\"){\r\n      imgUrl = registry.imgUrl\r\n    }\r\n  }\r\n  if(!imgUrl){\r\n    imgUrl = \"https://www.emsevilla.es/wp-content/uploads/2020/10/no-image-1.png\"\r\n  }\r\n  return (\r\n    <>\r\n      <Card\r\n        hoverable\r\n        className=\"Card\"\r\n        cover={<div className=\"imgSpCont\"><img className=\"imgSp\" alt=\"example\" src={imgUrl}/></div>}\r\n      >\r\n        <Meta title={species.scientific_name} description={species.nombre_comun} />\r\n      </Card>\r\n      {/*\r\n      <div className=\"registryCont\">\r\n        <div className=\"registryData\">\r\n          <h3>{species.scientific_name}</h3>\r\n          {species.nombre_comun ? <h4>{species.nombre_comun}</h4> : null}\r\n          {species.info.nombre_ingles ? <p>Inglés: {species.info.nombre_ingles}</p> : null}\r\n          {species.info.nombre_port ? <p>Portugués: {species.info.nombre_port}</p> : null}\r\n        </div>\r\n        <div className=\"imgSpCont\">\r\n          {imgUrl ? <img className=\"imgSp\" src={imgUrl} alt=\"species sample\"></img> : null}\r\n        </div>\r\n      </div>\r\n      */}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SpeciesItem;","import axios from \"axios\"\r\n\r\n\r\nconst getSpeciesOfLoc = async (query) => {\r\n  console.log(query)\r\n  var data\r\n  await axios\r\n    .get(query)\r\n    .then((response) => {\r\n      console.log(\"getSpecies\")\r\n      const dataResp = response.data\r\n      data = JSON.parse(dataResp)\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"ERROR!!! : \", error)\r\n      //speciesDataSet(JSON.parse(testData))\r\n    })\r\n  return data\r\n}\r\n\r\nexport default getSpeciesOfLoc","import axios from 'axios';\r\n\r\nconst testData = [\"Nothura maculosa\",\"Podiceps major\"]\r\n\r\nconst getSpeciesData = async (data) => {\r\n  var dataJson\r\n  await axios.post(\"https://us-central1-species-eebec.cloudfunctions.net/app\", {\"species\": data})\r\n    .then((response) => {\r\n      console.log(\"getSpeciesData\")\r\n      const dataResp = response.data\r\n      dataJson = JSON.parse(dataResp)\r\n      console.log(\"datas sent: \",data,\"dataJson: \", dataJson)\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"getSpeciesData ERROR!!! : \", error)\r\n      //dataSet(JSON.parse(testData))\r\n    })\r\n  return dataJson\r\n}\r\n\r\nexport default getSpeciesData","import React, { useContext, useEffect, useRef, useState } from 'react';\r\nimport SpeciesItem from './SpeciesItem';\r\nimport './SpeciesCont.scss'\r\nimport RouteContext from '../context/RouteProvider';\r\nimport LocContext from '../context/LocProvider';\r\nimport getSpeciesOfLoc from '../utils/getSpeciesOfLoc';\r\nimport checkCache from '../utils/checkCache';\r\nimport getSpeciesData from '../utils/getSpeciesData'\r\nimport 'antd/dist/antd.css';\r\nimport { Pagination } from 'antd';\r\nimport { useHistory } from 'react-router';\r\n\r\nconst spByPage = 20\r\n\r\nfunction getSubArr(srcArr, page){\r\n  console.log(\"getSubArr: \",page)\r\n  const newArr = srcArr.slice((page-1)*spByPage, (page)*spByPage)\r\n  return newArr\r\n}\r\n\r\nfunction SpeciesCont(props) {\r\n  console.log(\"render SpeciesCont\")\r\n  let query = \"https://us-central1-species-eebec.cloudfunctions.net/app\"\r\n\r\n  const match = useContext(RouteContext).match\r\n  console.log(\"SpeciesCont match path: \",match.path)\r\n  const loc = match.params.lugar\r\n  const paramPage = match.params.page\r\n  const onLocChange = useContext(LocContext).locInfo.onLocChange\r\n  \r\n  const [page, setPage] = useState(1)\r\n  const [speciesData, setSpeciesData] = useState([])\r\n  const [speciesItemList, setSpeciesItemList] = useState([])\r\n  const [allSpecies, setAllSpecies] = useState([])\r\n  const [speciesArr, setSpeciesArr] = useState([])\r\n\r\n  console.log(\"page: \",page)\r\n  useEffect(()=>{                                                     // Sets page index based on url path params. Default is 1.\r\n    if(paramPage){\r\n      console.log(\"setPage: \",paramPage)\r\n      setPage(paramPage)\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  },[paramPage])\r\n\r\n  /*\r\n    const firstUpdate = useRef(true);\r\n    useEffect(()=>{                                                   // CURRENTLY UNNECESSARY (currently I use the url path params)\r\n      if (firstUpdate.current) {\r\n        firstUpdate.current = false;\r\n        return;\r\n      }\r\n      if(loc){\r\n        console.log(\"(locChange) setPage: \",1)\r\n        onLocChange(loc)\r\n        setPage(1)\r\n      }\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    },[loc])\r\n  */\r\n\r\n  if(loc){\r\n    query += `?lugar=${loc}`\r\n  } else {\r\n    query += `?lugar=Chajarí`\r\n    console.log(\"ERROR - SpeciesCont: No loc name\")\r\n  }\r\n  console.log(query)\r\n\r\n  useEffect(() => {                                                   // Looks up if the species data for this location has already been\r\n    (async ()=>{                                                      // requested and cached, in which case it returns the cached data.\r\n      console.log(query)                                              // Otherwise it requests, caches and returns the data.\r\n      const resp = await checkCache(query,getSpeciesOfLoc)\r\n      if(resp){\r\n        console.log(\"setSpeciesData: \",resp)\r\n        setSpeciesData({...resp})\r\n      } else {\r\n        console.log(\"RESP EMPTY: \", resp)\r\n      }\r\n    })()\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [query])\r\n\r\n  useEffect(()=>{                                                     // Loops through the species data and returns all species\r\n    console.log(\"setSpeciesData INSIDE setAllSpecies useEffect: \",speciesData)\r\n    if(speciesData && speciesData.count){\r\n      const tempAllSpecies = []\r\n      for(let elem of speciesData.species){\r\n        if(elem && allSpecies.indexOf(elem) === -1){\r\n          tempAllSpecies.push(elem)\r\n        }\r\n      }\r\n      const specLocs = speciesData.lugaresDetallados\r\n      for(let specLoc in specLocs){\r\n        console.log(specLoc)\r\n        for(let sp of specLocs[specLoc].species){\r\n          if(sp && allSpecies.indexOf(sp) === -1){\r\n            tempAllSpecies.push(sp)\r\n          }\r\n        }\r\n      }\r\n      setAllSpecies(tempAllSpecies)\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  },[speciesData])\r\n\r\n  useEffect(() => {                                                   // Gets subArray of allSpecies array based on page index\r\n    console.log(\"setSpeciesArr: \",getSubArr(allSpecies, page))\r\n    setSpeciesArr([...getSubArr(allSpecies, page)])\r\n  },[allSpecies, page])\r\n\r\n  useEffect(() => {                                                   // Creates a SpeciesItem component for each species\r\n    let dataElemArr = [];\r\n    (async ()=>{\r\n      \r\n      console.log(\"speciesArr\",speciesArr)\r\n      if(speciesArr.length){\r\n        const data = await checkCache(speciesArr, getSpeciesData)     // Looks up if the data for this species (singular) has already been requested\r\n        //console.log(data)                                           // and cached, in which case it returns the cached data. Otherwise\r\n        if(data){                                                     // it requests, caches and returns the data.\r\n          for(let dataElem of data){\r\n            if(dataElem){\r\n              dataElemArr.push(\r\n                <SpeciesItem species={dataElem} key={dataElem.scientific_name}/>\r\n              )\r\n            }\r\n          }\r\n        }\r\n      }\r\n      console.log(\"setSpeciesItemList: \",dataElemArr)\r\n      setSpeciesItemList([...dataElemArr])\r\n    })()\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [speciesArr])\r\n\r\n  const history = useHistory();\r\n\r\n  const onPageChange = (ev) => {                                      // Changes page index (pushes to history)\r\n    console.log(\"Push Page: \",ev)\r\n    let exp = /\\/[0-9]+/i\r\n    let newUrl = match.url\r\n    if(newUrl.match(exp)){\r\n      newUrl = newUrl.replace(exp, \"\")\r\n    }\r\n    history.push(`${newUrl}/${ev}`)\r\n  }\r\n  console.log(speciesItemList)\r\n  return (\r\n    <div>\r\n      <div style={{display: \"flex\", flexWrap: \"wrap\", justifyContent: \"space-evenly\"}}>\r\n        {[...speciesItemList]}\r\n      </div>\r\n      <div className=\"pagCont\">\r\n        <Pagination\r\n          onChange={ev => onPageChange(ev)} \r\n          showTotal={()=>`${(page-1)*spByPage}-${(page)*spByPage} de ${allSpecies.length} especies`} \r\n          defaultCurrent={page} \r\n          showSizeChanger={false}\r\n          total={allSpecies.length} \r\n          defaultPageSize={20} \r\n          style={{display: \"flex\", justifyContent: \"center\", position: \"relative\"}}\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SpeciesCont;","import { Switch } from 'antd';\r\nimport React, { useContext } from 'react';\r\nimport { Route, useRouteMatch } from 'react-router';\r\nimport RouteContext, { RouteProvider } from '../context/RouteProvider';\r\nimport SpeciesCont from './SpeciesCont';\r\n\r\nfunction MainCont(props) {\r\n  const match = useContext(RouteContext).match\r\n  console.log(\"match: \",match.path)\r\n\r\n  return (\r\n    <>\r\n      <Route path={`${match.path}/:page`}>\r\n        <RouteProvider>\r\n          <SpeciesCont/>\r\n        </RouteProvider>\r\n      </Route>\r\n      <Route path={`${match.path}`} exact>\r\n        <RouteProvider>\r\n          <SpeciesCont/>\r\n        </RouteProvider>\r\n      </Route>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default MainCont;","import React, { useContext } from 'react';\r\nimport { Route, Switch } from 'react-router';\r\nimport RouteContext, {RouteProvider} from '../context/RouteProvider';\r\nimport MainCont from './MainCont';\r\n\r\nfunction Explore(props) {\r\n\r\n  const match = useContext(RouteContext).match\r\n  console.log(\"match: \",match.path)\r\n\r\n  return (\r\n    <div>\r\n      <Switch>\r\n        <Route path={`${match.path}/:lugar`}>\r\n          <RouteProvider>\r\n            <MainCont/>\r\n          </RouteProvider>\r\n        </Route>\r\n        <Route path={match.path}>\r\n          <h3>Please select a location.</h3>\r\n        </Route>\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Explore;","import React from 'react';\nimport './App.scss'\nimport 'antd/dist/antd.css';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  //BrowserRouter,\n  HashRouter,\n  //Link,\n} from \"react-router-dom\";\nimport { LocProvider } from './context/LocProvider';\nimport { RouteProvider } from './context/RouteProvider';\nimport Sidebar from './components/Sidebar';\nimport Explore from './components/Explore';\nimport { Layout } from 'antd';\n\nconst { Header, Footer, Sider, Content } = Layout;\n\nfunction App() {\n  return (\n    <Router>\n      <HashRouter>\n        <div className=\"App\">\n          <LocProvider>\n          <Layout>\n            <Header>\n              {/*<Header/>*/}\n            </Header>\n            <Layout>\n              <Sider breakpoint=\"md\" collapsedWidth=\"0\" zeroWidthTriggerStyle={{top:0,justifySelf: \"end\"}} width={350} >\n                <Sidebar/>\n              </Sider>\n              <Content>\n                <div className=\"mainDiv\">\n                  <Switch>\n                    <Route path=\"/\" exact>\n                      <RouteProvider>\n                        {/*<Home />*/}\n                      </RouteProvider>\n                    </Route>\n                    <Route path=\"/explore\">\n                      <RouteProvider>\n                        <Explore />\n                      </RouteProvider>\n                    </Route>\n                  </Switch>\n                </div>\n              </Content>\n            </Layout>\n            <Footer>\n              \n            </Footer>\n          </Layout>\n            \n          </LocProvider>\n        </div>\n      </HashRouter>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n//import './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}