(this.webpackJsonpspecies=this.webpackJsonpspecies||[]).push([[0],{164:function(e,t,c){},192:function(e,t,c){},193:function(e,t,c){},194:function(e,t,c){},327:function(e,t,c){},333:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),s=c(22),r=c.n(s),o=(c(164),c(114),c(70)),l=c(14),i=c(35),u=c(6),j=a.a.createContext({}),p=function(e){var t=Object(n.useState)(""),c=Object(i.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)(""),o=Object(i.a)(r,2),l=o[0],p=o[1],b=Object(n.useState)([]),h=Object(i.a)(b,2),f=h[0],O=h[1];return Object(u.jsx)(j.Provider,{value:{locInfo:{loc:a,locSpec:l,locData:f,onLocChange:function(e){console.log("setLoc",e),s(e)},onLocSpecChange:function(e){console.log("setLocSpec",e),p(e)},onLocDataChange:function(e){console.log("setLocData",e),O(e)}}},children:e.children})},b=j,h=a.a.createContext({}),f=function(e){var t=Object(l.g)();return Object(u.jsx)(h.Provider,{value:{match:t},children:e.children})},O=h,d=c(63),g=c(21),x=c.n(g),v=c(30),m=c(73),S=c(173);function y(){return y=Object(v.a)(x.a.mark((function e(t,c){var n,a,s,r,o,l=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>2&&void 0!==l[2]?l[2]:[],a=JSON.stringify(t),s=S.create(a)(999999),console.log(t,s),!(r=JSON.parse(localStorage.getItem(s)))||"object"!==typeof r||0===Object.keys(r).length){e.next=10;break}return console.log("FROM CACHE"),e.abrupt("return",r);case 10:return e.next=12,c.apply(void 0,[t].concat(Object(m.a)(n)));case 12:return o=e.sent,console.log("FROM REQUEST"),o&&localStorage.setItem(s,JSON.stringify(o)),e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}var C=function(e,t){return y.apply(this,arguments)},w=c(56),N=c.n(w),E=function(){var e=Object(v.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://us-central1-species-eebec.cloudfunctions.net/app").then((function(e){console.log("getTopLocs");var c=e.data;t=JSON.parse(c)})).catch((function(e){console.log("ERROR!!! : ",e)}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=E;c(192);var k=function(e){return e.selected&&[].push(),Object(u.jsx)("div",{className:"locItem",children:Object(u.jsxs)(o.c,{to:"/explore/".concat(e.loc.lugar,"/1"),children:[Object(u.jsx)("span",{className:"loc",children:e.loc.lugar})," ",Object(u.jsx)("span",{className:"count",children:e.loc.count})]})})};var D=function(e){var t=Object(n.useState)(null),c=Object(i.a)(t,2),a=c[0],s=c[1],r=Object(n.useContext)(b).locInfo,o=r.loc,l=r.onLocDataChange;Object(n.useEffect)((function(){Object(v.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C("getTopLocs",R);case 2:t=e.sent,l(t),console.log("setLocsData: ",t),s(t);case 6:case"end":return e.stop()}}),e)})))()}),[]);var j=[];if(a){var p,h=0,f=Object(d.a)(a);try{for(f.s();!(p=f.n()).done;){var O=p.value;j.push(Object(u.jsx)(k,{loc:O,selected:O===o},O+"-"+h)),h++}}catch(g){f.e(g)}finally{f.f()}}return Object(u.jsx)("div",{className:"locCont",children:j})};c(193);var L=function(e){return Object(u.jsx)("div",{className:"Sidebar",children:Object(u.jsx)(D,{})})},I=c(158),J=(c(194),c(337)),P=c(151),A=c.n(P);var T=function(e){for(var t=e.species,c="",n=0,a=Object.values(t.info.registers);n<a.length;n++){var s=a[n];if(c)break;s.imgUrl&&"https://www.ecoregistros.org/site/images/play.bmp"!==s.imgUrl&&(c=s.imgUrl)}return c||(c="https://www.emsevilla.es/wp-content/uploads/2020/10/no-image-1.png"),Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(J.a,{hoverable:!0,className:"Card",cover:Object(u.jsx)("div",{className:"imgSpCont",children:Object(u.jsx)("img",{className:"imgSp",alt:"example",src:c})}),children:Object(u.jsx)(A.a,{title:t.scientific_name,description:t.nombre_comun})})})},F=(c(327),function(){var e=Object(v.a)(x.a.mark((function e(t){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,N.a.get(t).then((function(e){console.log("getSpecies");var t=e.data;c=JSON.parse(t)})).catch((function(e){console.log("ERROR!!! : ",e)}));case 3:return e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),z=F,M=function(){var e=Object(v.a)(x.a.mark((function e(t){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("https://us-central1-species-eebec.cloudfunctions.net/app",{species:t}).then((function(e){console.log("getSpeciesData");var n=e.data;c=JSON.parse(n),console.log("datas sent: ",t,"dataJson: ",c)})).catch((function(e){console.log("getSpeciesData ERROR!!! : ",e)}));case 2:return e.abrupt("return",c);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=M,W=c(341),_=c(338),H=c(157);function B(e,t){return console.log("getSubArr: ",t),e.slice(20*(t-1),20*t)}var G=function(e){console.log("render SpeciesCont");var t="https://us-central1-species-eebec.cloudfunctions.net/app",c=Object(n.useContext)(O).match;console.log("SpeciesCont match path: ",c.path);var a=c.params.lugar,s=c.params.page,r=(Object(n.useContext)(b).locInfo.onLocChange,Object(n.useState)(!1)),o=Object(i.a)(r,2),j=o[0],p=o[1],h=Object(n.useState)(1),f=Object(i.a)(h,2),g=f[0],S=f[1],y=Object(n.useState)([]),w=Object(i.a)(y,2),N=w[0],E=w[1],R=Object(n.useState)([]),k=Object(i.a)(R,2),D=k[0],L=k[1],J=Object(n.useState)([]),P=Object(i.a)(J,2),A=P[0],F=P[1],M=Object(n.useState)([]),G=Object(i.a)(M,2),Q=G[0],Y=G[1];console.log("page: ",g),Object(n.useEffect)((function(){s&&(console.log("setPage: ",s),S(s))}),[s]),a?t+="?lugar=".concat(a):(t+="?lugar=Chajar\xed",console.log("ERROR - SpeciesCont: No loc name")),console.log(t),Object(n.useEffect)((function(){Object(v.a)(x.a.mark((function e(){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),p(!0),e.next=4,C(t,z);case 4:(c=e.sent)?(console.log("setSpeciesData: ",c),E(Object(I.a)({},c))):console.log("RESP EMPTY: ",c);case 6:case"end":return e.stop()}}),e)})))()}),[t]),Object(n.useEffect)((function(){if(console.log("setSpeciesData INSIDE setAllSpecies useEffect: ",N),N&&N.count){var e,t=[],c=Object(d.a)(N.species);try{for(c.s();!(e=c.n()).done;){var n=e.value;n&&-1===A.indexOf(n)&&t.push(n)}}catch(i){c.e(i)}finally{c.f()}var a=N.lugaresDetallados;for(var s in a){console.log(s);var r,o=Object(d.a)(a[s].species);try{for(o.s();!(r=o.n()).done;){var l=r.value;l&&-1===A.indexOf(l)&&t.push(l)}}catch(i){o.e(i)}finally{o.f()}}F(t)}}),[N]),Object(n.useEffect)((function(){console.log("setSpeciesArr: ",B(A,g)),Y(Object(m.a)(B(A,g)))}),[A,g]),Object(n.useEffect)((function(){var e=[];Object(v.a)(x.a.mark((function t(){var c,n,a,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("speciesArr",Q),!Q.length){t.next=6;break}return t.next=4,C(Q,U);case 4:if(c=t.sent){n=Object(d.a)(c);try{for(n.s();!(a=n.n()).done;)(s=a.value)&&e.push(Object(u.jsx)(T,{species:s},s.scientific_name))}catch(r){n.e(r)}finally{n.f()}}case 6:console.log("setSpeciesItemList: ",e),L([].concat(e)),p(!1);case 9:case"end":return t.stop()}}),t)})))()}),[Q]);var q=Object(l.f)();console.log(D);var K=Object(u.jsx)(H.a,{style:{fontSize:80},spin:!0});return Object(u.jsxs)(u.Fragment,{children:[j&&Object(u.jsxs)("div",{className:"spinCont",children:[Object(u.jsx)("h2",{children:"LOADING..."}),Object(u.jsx)(W.a,{indicator:K})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-evenly"},children:Object(m.a)(D)}),Object(u.jsx)("div",{className:"pagCont",children:Object(u.jsx)(_.a,{onChange:function(e){return function(e){console.log("Push Page: ",e);var t=/\/[0-9]+/i,n=c.url;n.match(t)&&(n=n.replace(t,"")),q.push("".concat(n,"/").concat(e))}(e)},showTotal:function(){return"".concat(20*(g-1),"-").concat(20*g," de ").concat(A.length," especies")},defaultCurrent:g,showSizeChanger:!1,total:A.length,defaultPageSize:20,style:{display:"flex",justifyContent:"center",position:"relative"}})})]})]})};var Q=function(e){var t=Object(n.useContext)(O).match;return console.log("match: ",t.path),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(l.a,{path:"".concat(t.path,"/:page"),children:Object(u.jsx)(f,{children:Object(u.jsx)(G,{})})}),Object(u.jsx)(l.a,{path:"".concat(t.path),exact:!0,children:Object(u.jsx)(f,{children:Object(u.jsx)(G,{})})})]})};var Y=function(e){var t=Object(n.useContext)(O).match;return console.log("match: ",t.path),Object(u.jsx)("div",{children:Object(u.jsxs)(l.c,{children:[Object(u.jsx)(l.a,{path:"".concat(t.path,"/:lugar"),children:Object(u.jsx)(f,{children:Object(u.jsx)(Q,{})})}),Object(u.jsx)(l.a,{path:t.path,children:Object(u.jsx)("h2",{style:{position:"relative",textAlign:"center",color:"white",paddingTop:20},children:"Please select a location from the left menu"})})]})})},q=c(339),K=q.a.Header,V=q.a.Footer,X=q.a.Sider,Z=q.a.Content;var $=function(){return Object(u.jsx)(o.a,{children:Object(u.jsx)(o.b,{children:Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(p,{children:Object(u.jsxs)(q.a,{children:[Object(u.jsx)(K,{}),Object(u.jsxs)(q.a,{children:[Object(u.jsx)(X,{breakpoint:"md",collapsedWidth:"0",zeroWidthTriggerStyle:{top:0,justifySelf:"end"},width:250,children:Object(u.jsx)(L,{})}),Object(u.jsx)(Z,{children:Object(u.jsx)("div",{className:"mainDiv",children:Object(u.jsxs)(l.c,{children:[Object(u.jsx)(l.a,{path:"/",exact:!0,children:Object(u.jsx)(f,{})}),Object(u.jsx)(l.a,{path:"/explore",children:Object(u.jsx)(f,{children:Object(u.jsx)(Y,{})})})]})})})]}),Object(u.jsx)(V,{})]})})})})})};r.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)($,{})}),document.getElementById("root"))}},[[333,1,2]]]);
//# sourceMappingURL=main.d53cb6a3.chunk.js.map