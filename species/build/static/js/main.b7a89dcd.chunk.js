(this.webpackJsonpspecies=this.webpackJsonpspecies||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(45),s=n.n(a),o=(n(68),n(36),n(23)),i=n(4),l=n(16),u=n(1),j=r.a.createContext({}),p=function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(""),o=Object(l.a)(s,2),i=o[0],p=o[1],b=Object(c.useState)([]),f=Object(l.a)(b,2),h=f[0],O=f[1];return Object(u.jsx)(j.Provider,{value:{locInfo:{loc:r,locSpec:i,locData:h,onLocChange:function(e){a(e)},onLocSpecChange:function(e){p(e)},onLocDataChange:function(e){O(e)}}},children:e.children})},b=j,f=r.a.createContext({}),h=function(e){var t=Object(i.f)();return Object(u.jsx)(f.Provider,{value:{match:t},children:e.children})},O=f,d=n(22),x=n(6),g=n.n(x),v=n(7),m=n(19),S=n.n(m),w=function(){var e=Object(v.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("https://us-central1-species-eebec.cloudfunctions.net/app").then((function(e){console.log("getTopLocs");var n=e.data;t=JSON.parse(n)})).catch((function(e){console.log("ERROR!!! : ",e)}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=w;var C=function(e){return e.selected&&[].push(),Object(u.jsxs)("div",{children:["En ",Object(u.jsx)(o.b,{to:"/explore/".concat(e.loc.lugar),children:e.loc.lugar})," hay ",e.loc.count," registros."]})};var E=function(e){var t=Object(c.useState)(null),n=Object(l.a)(t,2),r=n[0],a=n[1],s=Object(c.useContext)(b).locInfo,o=s.loc,i=s.onLocDataChange;Object(c.useEffect)((function(){Object(v.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:t=e.sent,i(t),a(t);case 5:case"end":return e.stop()}}),e)})))()}),[]);var j=[];if(r){var p,f=0,h=Object(d.a)(r);try{for(h.s();!(p=h.n()).done;){var O=p.value;j.push(Object(u.jsx)(C,{loc:O,selected:O===o},O+"-"+f)),f++}}catch(x){h.e(x)}finally{h.f()}}return Object(u.jsx)("div",{className:"locCont",children:j})};var R=function(e){return Object(u.jsx)("div",{children:Object(u.jsx)(E,{})})},N=n(61);n(97);var k=function(e){for(var t=e.species,n="",c=0,r=Object.values(t.info.registers);c<r.length;c++){var a=r[c];if(n)break;a.imgUrl&&"https://www.ecoregistros.org/site/images/play.bmp"!==a.imgUrl&&(n=a.imgUrl)}return n||(n="https://www.emsevilla.es/wp-content/uploads/2020/10/no-image-1.png"),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"registryCont",children:[Object(u.jsxs)("div",{className:"registryData",children:[Object(u.jsx)("h3",{children:t.scientific_name}),t.nombre_comun?Object(u.jsx)("h4",{children:t.nombre_comun}):null,t.info.nombre_ingles?Object(u.jsxs)("p",{children:["Ingl\xe9s: ",t.info.nombre_ingles]}):null,t.info.nombre_port?Object(u.jsxs)("p",{children:["Portugu\xe9s: ",t.info.nombre_port]}):null]}),Object(u.jsx)("div",{className:"imgSpCont",children:n?Object(u.jsx)("img",{className:"imgSp",src:n,alt:"species sample"}):null})]})})},J=(n(98),function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,S.a.get(t).then((function(e){console.log("getSpecies");var t=e.data;n=JSON.parse(t)})).catch((function(e){console.log("ERROR!!! : ",e)}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),D=J,_=n(58),I=n(99);function L(){return L=Object(v.a)(g.a.mark((function e(t,n){var c,r,a,s,o,i=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=i.length>2&&void 0!==i[2]?i[2]:[],r=JSON.stringify(t),a=I.create(r)(999999),console.log(a),!(s=JSON.parse(localStorage.getItem(a)))||"object"!==typeof s||0===Object.keys(s).length){e.next=10;break}return console.log("FROM CACHE"),e.abrupt("return",s);case 10:return e.next=12,n.apply(void 0,[t].concat(Object(_.a)(c)));case 12:return o=e.sent,console.log("FROM REQUEST"),localStorage.setItem(a,JSON.stringify(o)),e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}var P=function(e,t){return L.apply(this,arguments)},F=function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("https://us-central1-species-eebec.cloudfunctions.net/app",{species:t}).then((function(e){console.log("getSpeciesData");var c=e.data;n=JSON.parse(c),console.log("datas sent: ",t,"dataJson: ",n)})).catch((function(e){console.log("getSpeciesData ERROR!!! : ",e)}));case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=F,U=n(106),T=n(105);var A=function(e){console.log("render");var t=Object(c.useState)(null),n=Object(l.a)(t,2),r=n[0],a=n[1],s="https://us-central1-species-eebec.cloudfunctions.net/app",o=Object(c.useContext)(O).match.params.lugar,i=Object(c.useContext)(b).locInfo.onLocChange;Object(c.useEffect)((function(){Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o&&i(o);case 1:case"end":return e.stop()}}),e)})))()}),[o]),o?s+="?lugar=".concat(o):(s+="?lugar=Chajar\xed",console.log("ERROR - SpeciesCont: No loc name")),Object(c.useEffect)((function(){Object(v.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(s,D);case 2:(t=e.sent)?a(Object(N.a)({},t)):console.log("RESP EMPTY: ",t);case 4:case"end":return e.stop()}}),e)})))()}),[s]);var j=Object(c.useState)([]),p=Object(l.a)(j,2),f=p[0],h=p[1],x=[];return Object(c.useEffect)((function(){console.log("useEffect");var e=[];Object(v.a)(g.a.mark((function t(){var n,c,a,s,o,i,l,j,p,b,f;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=13;break}for(n=0;n<r.species.length&&n<20;n++)(c=r.species[n])&&x.push(c);for(s in a=r.lugaresDetallados){o=Object(d.a)(a[s].species);try{for(o.s();!(i=o.n()).done;)l=i.value,n<20&&(x.push(l),n++)}catch(O){o.e(O)}finally{o.f()}}return console.log(x),t.next=8,P(x,M);case 8:j=t.sent,console.log(j),p=Object(d.a)(j);try{for(p.s();!(b=p.n()).done;)(f=b.value)&&e.push(Object(u.jsx)(U.a,{span:8,children:Object(u.jsx)(k,{species:f})},f.scientific_name))}catch(O){p.e(O)}finally{p.f()}h(e);case 13:case"end":return t.stop()}}),t)})))()}),[r]),Object(u.jsx)(T.a,{gutter:[16,16],className:"speciesCont",children:f})};var H=function(e){var t=Object(c.useContext)(O).match;return console.log(t.path),Object(u.jsx)("div",{children:Object(u.jsxs)(i.c,{children:[Object(u.jsx)(i.a,{path:"".concat(t.path,"/:lugar"),children:Object(u.jsx)(h,{children:Object(u.jsx)(A,{})})}),Object(u.jsx)(i.a,{path:t.path,children:Object(u.jsx)("h3",{children:"Please select a topic."})})]})})},B=n(103),Q=B.a.Header,Y=B.a.Footer,q=B.a.Sider,z=B.a.Content;var G=function(){return Object(u.jsx)(o.a,{children:Object(u.jsx)(o.a,{basename:"/species/build/",children:Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(p,{children:Object(u.jsxs)(B.a,{children:[Object(u.jsx)(Q,{}),Object(u.jsxs)(B.a,{children:[Object(u.jsx)(q,{children:Object(u.jsx)(R,{})}),Object(u.jsx)(z,{children:Object(u.jsx)("div",{className:"mainDiv",children:Object(u.jsxs)(i.c,{children:[Object(u.jsx)(i.a,{path:"/",exact:!0,children:Object(u.jsx)(h,{})}),Object(u.jsx)(i.a,{path:"/explore",children:Object(u.jsx)(h,{children:Object(u.jsx)(H,{})})})]})})})]}),Object(u.jsx)(Y,{})]})})})})})};s.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(G,{})}),document.getElementById("root"))},68:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){}},[[101,1,2]]]);
//# sourceMappingURL=main.b7a89dcd.chunk.js.map