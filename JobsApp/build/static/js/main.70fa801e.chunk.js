(this["webpackJsonpjobs-app"]=this["webpackJsonpjobs-app"]||[]).push([[0],{144:function(e,t,n){},145:function(e,t,n){},223:function(e,t,n){"use strict";n.r(t);var c,o=n(0),r=n.n(o),a=n(32),s=n.n(a),i=(n(144),n(4)),l=n(107),j=(n(145),n(146),n(231)),u=n(233),b=r.a.createContext({jobsInfo:{jobsTitle:"",jobsLoc:"",onJobLocChange:null,onJobTitleChange:null}}),d=n(7),h=function(e,t,n,c){return Object(d.jsx)(j.a,{value:e[t],style:{width:"100%"},options:c,placeholder:"Title",filterOption:function(e,t){return-1!==t.value.toUpperCase().indexOf(e.toUpperCase())},onChange:function(t){return e[n](t)}})},p=function(e){var t=Object(o.useContext)(b).jobsInfo;return Object(d.jsxs)("div",{className:"SearchBar",children:[h(t,"jobsTitle","onJobTitleChange",e.titleOptions),h(t,"jobsLoc","onJobLocChange",e.countryOptions),Object(d.jsx)(u.a,{onClick:function(){t.onJobLocChange(""),t.onJobTitleChange("")},children:"Clear search"})]})},O=n(131),f=function(e){return Object(d.jsxs)("div",{className:"JobDesc ".concat(e.selectedJob?"":"empty"),children:[Object(d.jsx)("h1",{children:e.selectedJob?e.selectedJob.title:"Seleccione un trabajo"}),Object(d.jsx)("p",{children:Object(d.jsx)(O.a,{children:e.selectedJob?e.selectedJob.description:""})})]})},x=function(e){var t=e.job,n=t.company,c="";t.cities.map((function(e){return c+="".concat(e.name,", ").concat(e.country.name,". "),e}));var o=(new Date).getTime(),r=new Date(t.createdAt).getTime(),a=Math.round((o-r)/1e3),s="";return s=a<1?"just now":a<60?"".concat(a," seconds ago"):a<3600?"".concat(Math.round(a/60)," minutes ago"):a<86400?"".concat(Math.round(a/3600)," hours ago"):a<2592e3?"".concat(Math.round(a/86400)," days ago"):a<31536e3?"".concat(Math.round(a/2592e3)," months ago"):"".concat(Math.round(a/31536e3)," years ago"),Object(d.jsxs)("div",{className:"Job ".concat(e.selected?"selected":""),onClick:function(){e.onSelectedJobIdChange(t.id)},children:[Object(d.jsx)("h3",{children:t.title}),Object(d.jsx)("h3",{className:"subtitle",children:Object(d.jsx)("a",{href:n.websiteUrl,children:n.name})}),Object(d.jsx)("h3",{className:"subtitle",children:c}),Object(d.jsx)("p",{className:"jobDate",children:s})]})},m=function(e){var t=Object(o.useContext)(b).jobsInfo,n=t.jobsLoc,c=t.jobsTitle;return Object(d.jsxs)("div",{className:"JobListHeader",children:[Object(d.jsx)("p",{className:"subtitle",children:function(){var e="";return(n||c)&&(e+="Empleos",c&&(e+=" de "+c),n&&(e+=" en "+n)),e}()}),Object(d.jsxs)("p",{className:"order",children:["Ordenar por: ",Object(d.jsx)("button",{className:"title"===e.orderBy?"active":"",onClick:function(){return e.onSetOrderByChange("title")},children:"nombre"})," - ",Object(d.jsx)("button",{className:"date"===e.orderBy?"active":"",onClick:function(){return e.onSetOrderByChange("date")},children:"fecha"})]})]})},C=function(e){var t=Object(o.useState)("title"),n=Object(i.a)(t,2),c=n[0],r=n[1],a=[],s=function(e,t){return e.title>t.title?1:-1};switch(c){case"title":s=function(e,t){return e.title>t.title?1:-1};break;case"date":s=function(e,t){return e.createdAt<t.createdAt?1:-1}}e.jobs.sort((function(e,t){return s(e,t)}));var l=!1;return e.jobs.map((function(t){return e.selectedJob&&(l=t.id===e.selectedJob.id),a.push(Object(d.jsx)(x,{onSelectedJobIdChange:e.onSelectedJobIdChange,job:t,selected:l},t.id)),t})),Object(d.jsxs)("div",{className:"jobList",children:[Object(d.jsx)(m,{onSetOrderByChange:function(e){r(e)},orderBy:c,quantity:e.jobs.length}),a]})},g=function(e){var t=Object(o.useState)(""),n=Object(i.a)(t,2),c=n[0],r=n[1],a=Object(o.useContext)(b).jobsInfo,s=[];e.data.jobs.map((function(e){if(-1===e.title.toUpperCase().indexOf(a.jobsTitle.toUpperCase()))return e;var t=0;return e.cities.map((function(e){return e.country.name.toUpperCase().indexOf(a.jobsLoc.toUpperCase())>=0&&t++,e})),0===t||s.push(e),e}));var l=s.find((function(e){return e.id===c}));return Object(d.jsxs)("div",{className:"JobListing",children:[Object(d.jsx)(C,{jobs:s,onSelectedJobIdChange:function(e){r(e)},selectedJob:l}),Object(d.jsx)(f,{selectedJob:l})]})},v=n(134),J=n(106),y=n(234),S=n(17),N=n(236),L=n(235),T=function(){return Object(d.jsx)("div",{className:"SourceCode",children:Object(d.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/jeronimoek/search-jobs-react-app",children:Object(d.jsx)(L.a,{style:{fontSize:70}})})})},I=new v.a({uri:"https://api.graphql.jobs/"}),U=function(){return Object(d.jsx)(y.a,{query:Object(J.a)(c||(c=Object(l.a)(["{\n      countries{\n        name\n      }\n      jobs{\n        id\n        title\n        description\n        commitment{\n          title\n        }\n        cities{\n          name\n          country{\n            name\n          }\n        }\n        company{\n          name\n          websiteUrl\n        }\n        applyUrl\n        createdAt\n      }\n    }"]))),children:function(e){var t=e.loading,n=e.error,c=e.data;if(t)return Object(d.jsx)("div",{className:"loading",children:Object(d.jsx)(N.a,{spin:!0})});if(n)return Object(d.jsx)("p",{children:"Error!"});var o=c.jobs.map((function(e){return{value:e.title}})),r=o.filter((function(e,t){return o.findIndex((function(t){return t.value.toUpperCase()===e.value.toUpperCase()}))===t})),a=c.countries.map((function(e){return{value:e.name}})),s=a.filter((function(e,t){return a.findIndex((function(t){return t.value.toUpperCase()===e.value.toUpperCase()}))===t}));return Object(d.jsxs)("div",{children:[Object(d.jsx)(p,{titleOptions:r,countryOptions:s}),Object(d.jsx)("hr",{}),Object(d.jsx)(g,{data:c}),Object(d.jsx)(T,{})]})}})},w=function(){var e=Object(o.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(o.useState)(""),a=Object(i.a)(r,2),s=a[0],l=a[1];return Object(d.jsx)(S.a,{client:I,children:Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(b.Provider,{value:{jobsInfo:{jobsTitle:n,jobsLoc:s,onJobLocChange:function(e){l(e)},onJobTitleChange:function(e){c(e)}}},children:Object(d.jsx)(U,{})})})})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,237)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),o(e),r(e),a(e)}))};s.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(w,{})}),document.getElementById("root")),k()}},[[223,1,2]]]);
//# sourceMappingURL=main.70fa801e.chunk.js.map